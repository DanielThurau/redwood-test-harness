Feature: value jump # features/gherkin.feature:1
  Test events following a value jump, under varying conditions
  Background: default state of the experiment  # features/gherkin.feature:4

  Scenario Outline: 1 fast maker and 1 slow sniper -- @1.1   # features/gherkin.feature:38
    Given global default parameters                          # features/steps/steps.py:55
      | parameter    | value |
      | V0           | 100   |
      | delta_slow   | 500   |
      | delta_fast   | 250   |
      | delta_eps    | 10    |
      | trigger_time | 5000  |
    Given there are 4 participants                           # features/steps/steps.py:67
    And default parameters                                   # features/steps/steps.py:80
      | parameter | value |
      | status    | out   |
      | speed     | slow  |
      | bid0      | 99    |
      | offer0    | 101   |
    And session lasts 10 seconds                             # features/steps/steps.py:101
    Given default parameters for users                       # features/steps/steps.py:110
    But participant 1 has status updated to make             # features/steps/steps.py:145
    And participant 1 has speed updated to fast              # features/steps/steps.py:145
    And participant 2 has status updated to snipe            # features/steps/steps.py:145
    When V jumps to 110 at trigger_time                      # features/steps/steps.py:175
    And market state is recorded at                          # features/steps/steps.py:328
      | time1                             | time2                             |
      | trigger_time+delta_slow-delta_eps | trigger_time+delta_slow+delta_eps |
    And session runs to completion                           # features/steps/steps.py:210
    Then at time1 system is in initial state except V is 110 # features/steps/steps.py:348
    And at time2 participant 1 has profit 0                  # features/steps/steps.py:353
    And at time2 participant 1 has spread 2                  # features/steps/steps.py:353
    And at time2 participants besides 1 have profit 0        # features/steps/steps.py:393

  Scenario Outline: 1 fast maker and 1 slow sniper -- @1.2   # features/gherkin.feature:39
    Given global default parameters                          # features/steps/steps.py:55
      | parameter    | value |
      | V0           | 100   |
      | delta_slow   | 500   |
      | delta_fast   | 250   |
      | delta_eps    | 10    |
      | trigger_time | 5000  |
    Given there are 4 participants                           # features/steps/steps.py:67
    And default parameters                                   # features/steps/steps.py:80
      | parameter | value |
      | status    | out   |
      | speed     | slow  |
      | bid0      | 99    |
      | offer0    | 101   |
    And session lasts 10 seconds                             # features/steps/steps.py:101
    Given default parameters for users                       # features/steps/steps.py:110
    But participant 2 has status updated to make             # features/steps/steps.py:145
    And participant 2 has speed updated to fast              # features/steps/steps.py:145
    And participant 3 has status updated to snipe            # features/steps/steps.py:145
    When V jumps to 110 at trigger_time                      # features/steps/steps.py:175
    And market state is recorded at                          # features/steps/steps.py:328
      | time1                             | time2                             |
      | trigger_time+delta_slow-delta_eps | trigger_time+delta_slow+delta_eps |
    And session runs to completion                           # features/steps/steps.py:210
    Then at time1 system is in initial state except V is 110 # features/steps/steps.py:348
    And at time2 participant 2 has profit 0                  # features/steps/steps.py:353
    And at time2 participant 2 has spread 2                  # features/steps/steps.py:353
    And at time2 participants besides 2 have profit 0        # features/steps/steps.py:393

  Scenario Outline: 1 fast maker and 1 slow sniper -- @1.3   # features/gherkin.feature:40
    Given global default parameters                          # features/steps/steps.py:55
      | parameter    | value |
      | V0           | 100   |
      | delta_slow   | 500   |
      | delta_fast   | 250   |
      | delta_eps    | 10    |
      | trigger_time | 5000  |
    Given there are 4 participants                           # features/steps/steps.py:67
    And default parameters                                   # features/steps/steps.py:80
      | parameter | value |
      | status    | out   |
      | speed     | slow  |
      | bid0      | 99    |
      | offer0    | 101   |
    And session lasts 10 seconds                             # features/steps/steps.py:101
    Given default parameters for users                       # features/steps/steps.py:110
    But participant 3 has status updated to make             # features/steps/steps.py:145
    And participant 3 has speed updated to fast              # features/steps/steps.py:145
    And participant 4 has status updated to snipe            # features/steps/steps.py:145
    When V jumps to 110 at trigger_time                      # features/steps/steps.py:175
    And market state is recorded at                          # features/steps/steps.py:328
      | time1                             | time2                             |
      | trigger_time+delta_slow-delta_eps | trigger_time+delta_slow+delta_eps |
    And session runs to completion                           # features/steps/steps.py:210
    Then at time1 system is in initial state except V is 110 # features/steps/steps.py:348
    And at time2 participant 3 has profit 0                  # features/steps/steps.py:353
    And at time2 participant 3 has spread 2                  # features/steps/steps.py:353
    And at time2 participants besides 3 have profit 0        # features/steps/steps.py:393

  Scenario Outline: 1 fast maker and 1 slow sniper -- @1.4   # features/gherkin.feature:41
    Given global default parameters                          # features/steps/steps.py:55
      | parameter    | value |
      | V0           | 100   |
      | delta_slow   | 500   |
      | delta_fast   | 250   |
      | delta_eps    | 10    |
      | trigger_time | 5000  |
    Given there are 4 participants                           # features/steps/steps.py:67
    And default parameters                                   # features/steps/steps.py:80
      | parameter | value |
      | status    | out   |
      | speed     | slow  |
      | bid0      | 99    |
      | offer0    | 101   |
    And session lasts 10 seconds                             # features/steps/steps.py:101
    Given default parameters for users                       # features/steps/steps.py:110
    But participant 4 has status updated to make             # features/steps/steps.py:145
    And participant 4 has speed updated to fast              # features/steps/steps.py:145
    And participant 1 has status updated to snipe            # features/steps/steps.py:145
    When V jumps to 110 at trigger_time                      # features/steps/steps.py:175
    And market state is recorded at                          # features/steps/steps.py:328
      | time1                             | time2                             |
      | trigger_time+delta_slow-delta_eps | trigger_time+delta_slow+delta_eps |
    And session runs to completion                           # features/steps/steps.py:210
    Then at time1 system is in initial state except V is 110 # features/steps/steps.py:348
    And at time2 participant 4 has profit 0                  # features/steps/steps.py:353
    And at time2 participant 4 has spread 2                  # features/steps/steps.py:353
    And at time2 participants besides 4 have profit 0        # features/steps/steps.py:393

1 feature passed, 0 failed, 0 skipped
4 scenarios passed, 0 failed, 0 skipped
60 steps passed, 0 failed, 0 skipped, 0 undefined
Took 0m0.250s
usage: python driver.py gherkin-file
selenium/test_sel HFT-CDA data/manifests/manifest_test.json Scenario1 10
selenium/test_sel HFT-CDA data/manifests/manifest_test.json Scenario3 10
selenium/test_sel HFT-CDA data/manifests/manifest_test.json Scenario2 10
selenium/test_sel HFT-CDA data/manifests/manifest_test.json Scenario4 10
